/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
import { Component, ViewChild, Input, Output, EventEmitter } from '@angular/core';
export class SliderComponent {
    constructor() {
        this.initialOptions = {};
        this.valueChange = new EventEmitter();
        // The following events are emitted
        this.slide = new EventEmitter();
        this.slideStart = new EventEmitter();
        this.slideStop = new EventEmitter();
        this.change = new EventEmitter();
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set style(value) {
        if (this.slider) {
            this.slider.getElement().setAttribute('style', value);
        }
        else {
            this.initialStyle = value;
        }
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set value(value) {
        if (this.slider) {
            this.slider.setValue(value);
        }
        else {
            this.initialOptions.value = value;
        }
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set min(value) {
        this.changeAttribute('min', value);
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set max(value) {
        this.changeAttribute('max', value);
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set step(value) {
        this.changeAttribute('step', value);
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set precision(value) {
        this.changeAttribute('precision', value);
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set orientation(value) {
        this.changeAttribute('orientation', value);
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set range(value) {
        this.changeAttribute('range', value);
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set selection(value) {
        this.changeAttribute('selection', value);
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set tooltip(value) {
        this.changeAttribute('tooltip', value);
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set tooltipSplit(value) {
        this.changeAttribute('tooltip_split', value);
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set tooltipPosition(value) {
        this.changeAttribute('tooltipPosition', value);
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set handle(value) {
        this.changeAttribute('handle', value);
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set reversed(value) {
        this.changeAttribute('reversed', value);
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set rtl(value) {
        this.changeAttribute('rtl', value);
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set enabled(value) {
        this.changeAttribute('enabled', value);
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set naturalArrowKeys(value) {
        this.changeAttribute('natural_arrow_keys', value);
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set ticks(value) {
        this.changeAttribute('ticks', value);
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set ticksPositions(value) {
        this.changeAttribute('ticks_positions', value);
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set ticksLabels(value) {
        this.changeAttribute('ticks_labels', value);
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set ticksSnapBounds(value) {
        this.changeAttribute('ticks_snap_bounds', value);
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set ticksTooltip(value) {
        this.changeAttribute('ticks_tooltip', value);
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set scale(value) {
        this.changeAttribute('scale', value);
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set labelledBy(value) {
        this.changeAttribute('labelledby', value);
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set rangeHighlights(value) {
        this.changeAttribute('rangeHighlights', value);
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set formatter(value) {
        this.changeAttribute('formatter', value);
    }
    /**
     * @return {?}
     */
    addChangeListeners() {
        this.slider.on('slide', (value) => {
            this.slide.emit(value);
        });
        this.slider.on('slideStart', (value) => {
            this.slideStart.emit(value);
        });
        this.slider.on('slideStop', (value) => {
            this.slideStop.emit(value);
        });
        this.slider.on('change', (event) => {
            this.change.emit(event);
            this.valueChange.emit(event.newValue);
        });
    }
    /**
     * @return {?}
     */
    prepareSlider() {
        // We need to add the change listeners again after each refresh
        this.addChangeListeners();
        // Add the styling to the element
        this.slider.getElement().setAttribute('style', this.initialStyle);
    }
    /**
     * @param {?} name
     * @param {?} value
     * @return {?}
     */
    changeAttribute(name, value) {
        if (this.slider) {
            this.slider.setAttribute(name, value);
            this.slider.refresh();
            this.prepareSlider();
        }
        else {
            this.initialOptions[name] = value;
        }
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        // Don't set the value over the initial options, because it will alway
        // be reset. This option seems to be a little buggy.
        let /** @type {?} */ value = undefined;
        if (this.initialOptions.value) {
            value = this.initialOptions.value;
            delete this.initialOptions['value'];
        }
        this.slider = new Slider(this.sliderElement.nativeElement, this.initialOptions);
        if (value) {
            this.slider.setValue(value);
        }
        this.prepareSlider();
    }
}
SliderComponent.decorators = [
    { type: Component, args: [{
                selector: 'mv-slider',
                template: `<input #slider>`,
                styles: [``]
            },] },
];
/** @nocollapse */
SliderComponent.ctorParameters = () => [];
SliderComponent.propDecorators = {
    sliderElement: [{ type: ViewChild, args: ['slider',] }],
    style: [{ type: Input }],
    value: [{ type: Input }],
    valueChange: [{ type: Output }],
    min: [{ type: Input }],
    max: [{ type: Input }],
    step: [{ type: Input }],
    precision: [{ type: Input }],
    orientation: [{ type: Input }],
    range: [{ type: Input }],
    selection: [{ type: Input }],
    tooltip: [{ type: Input }],
    tooltipSplit: [{ type: Input }],
    tooltipPosition: [{ type: Input }],
    handle: [{ type: Input }],
    reversed: [{ type: Input }],
    rtl: [{ type: Input }],
    enabled: [{ type: Input }],
    naturalArrowKeys: [{ type: Input }],
    ticks: [{ type: Input }],
    ticksPositions: [{ type: Input }],
    ticksLabels: [{ type: Input }],
    ticksSnapBounds: [{ type: Input }],
    ticksTooltip: [{ type: Input }],
    scale: [{ type: Input }],
    labelledBy: [{ type: Input }],
    rangeHighlights: [{ type: Input }],
    formatter: [{ type: Input }],
    slide: [{ type: Output }],
    slideStart: [{ type: Output }],
    slideStop: [{ type: Output }],
    change: [{ type: Output }]
};
function SliderComponent_tsickle_Closure_declarations() {
    /** @type {?} */
    SliderComponent.prototype.sliderElement;
    /** @type {?} */
    SliderComponent.prototype.slider;
    /** @type {?} */
    SliderComponent.prototype.initialOptions;
    /** @type {?} */
    SliderComponent.prototype.initialStyle;
    /** @type {?} */
    SliderComponent.prototype.valueChange;
    /** @type {?} */
    SliderComponent.prototype.slide;
    /** @type {?} */
    SliderComponent.prototype.slideStart;
    /** @type {?} */
    SliderComponent.prototype.slideStop;
    /** @type {?} */
    SliderComponent.prototype.change;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2xpZGVyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL25neC1ib290c3RyYXAtc2xpZGVyLyIsInNvdXJjZXMiOlsibGliL3NsaWRlci9zbGlkZXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFVLFNBQVMsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRSxNQUFNLGVBQWUsQ0FBQztBQVMxRixNQUFNO0lBaUtKOzhCQTFKc0IsRUFBRTsyQkFzQkEsSUFBSSxZQUFZLEVBQUU7O3FCQTRIeEIsSUFBSSxZQUFZLEVBQUU7MEJBRWIsSUFBSSxZQUFZLEVBQUU7eUJBRW5CLElBQUksWUFBWSxFQUFFO3NCQUVyQixJQUFJLFlBQVksRUFBRTtLQUVwQjs7Ozs7SUF0SmpCLElBQ0ksS0FBSyxDQUFDLEtBQVU7UUFDbEIsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDaEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxVQUFVLEVBQUUsQ0FBQyxZQUFZLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQyxDQUFDO1NBQ3ZEO1FBQUMsSUFBSSxDQUFDLENBQUM7WUFDTixJQUFJLENBQUMsWUFBWSxHQUFHLEtBQUssQ0FBQztTQUMzQjtLQUNGOzs7OztJQUdELElBQ0ksS0FBSyxDQUFDLEtBQXFCO1FBQzdCLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1lBQ2hCLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO1NBQzdCO1FBQUMsSUFBSSxDQUFDLENBQUM7WUFDTixJQUFJLENBQUMsY0FBYyxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7U0FDbkM7S0FDRjs7Ozs7SUFJRCxJQUNJLEdBQUcsQ0FBQyxLQUFhO1FBQ25CLElBQUksQ0FBQyxlQUFlLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FB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UUFBUTtvQkFTbEIsS0FBSztvQkFVTCxLQUFLOzBCQVFMLE1BQU07a0JBR04sS0FBSztrQkFLTCxLQUFLO21CQUtMLEtBQUs7d0JBS0wsS0FBSzswQkFLTCxLQUFLO29CQUtMLEtBQUs7d0JBS0wsS0FBSztzQkFLTCxLQUFLOzJCQUtMLEtBQUs7OEJBS0wsS0FBSztxQkFLTCxLQUFLO3VCQUtMLEtBQUs7a0JBS0wsS0FBSztzQkFLTCxLQUFLOytCQUtMLEtBQUs7b0JBS0wsS0FBSzs2QkFLTCxLQUFLOzBCQUtMLEtBQUs7OEJBS0wsS0FBSzsyQkFLTCxLQUFLO29CQUtMLEtBQUs7eUJBS0wsS0FBSzs4QkFLTCxLQUFLO3dCQUtMLEtBQUs7b0JBTUwsTUFBTTt5QkFFTixNQUFNO3dCQUVOLE1BQU07cUJBRU4sTUFBTSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBWaWV3Q2hpbGQsIElucHV0LCBPdXRwdXQsIEV2ZW50RW1pdHRlciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5kZWNsYXJlIHZhciBTbGlkZXI6IGFueTtcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnbXYtc2xpZGVyJyxcbiAgdGVtcGxhdGU6IGA8aW5wdXQgI3NsaWRlcj5gLFxuICBzdHlsZXM6IFtgYF1cbn0pXG5leHBvcnQgY2xhc3MgU2xpZGVyQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgLy8gVGhlIHNsaWRlciBIVE1MIGVsZW1lbnRcbiAgQFZpZXdDaGlsZCgnc2xpZGVyJykgc2xpZGVyRWxlbWVudDtcblxuICAvLyBUaGUgc2xpZGVyIG9iamVjdFxuICBzbGlkZXI6IGFueTtcblxuICBpbml0aWFsT3B0aW9uczogYW55ID0ge307XG4gIGluaXRpYWxTdHlsZTogYW55O1xuXG4gIC8vIFRoaXMgcHJvcGVydHkgaXMgbm90IGFwcGxpZWQgdG8gdGhlIHVuZGVybHlpbmcgc2xpZGVyIGVsZW1lbnRcbiAgQElucHV0KClcbiAgc2V0IHN0eWxlKHZhbHVlOiBhbnkpIHtcbiAgICBpZiAodGhpcy5zbGlkZXIpIHtcbiAgICAgIHRoaXMuc2xpZGVyLmdldEVsZW1lbnQoKS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgdmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmluaXRpYWxTdHlsZSA9IHZhbHVlO1xuICAgIH1cbiAgfVxuXG4gIC8vIEhhbmRsZSB0aGUgdmFsdWUgKHR3by13YXkpXG4gIEBJbnB1dCgpXG4gIHNldCB2YWx1ZSh2YWx1ZTogbnVtYmVyIHwgYW55W10pIHtcbiAgICBpZiAodGhpcy5zbGlkZXIpIHtcbiAgICAgIHRoaXMuc2xpZGVyLnNldFZhbHVlKHZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5pbml0aWFsT3B0aW9ucy52YWx1ZSA9IHZhbHVlO1xuICAgIH1cbiAgfVxuICBAT3V0cHV0KCkgdmFsdWVDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgLy8gVGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzIGFyZSBhcHBsaWVkIHRvIHRoZSB1bmRlcmx5aW5nIHNsaWRlciBlbGVtZW50XG4gIEBJbnB1dCgpXG4gIHNldCBtaW4odmFsdWU6IG51bWJlcikge1xuICAgIHRoaXMuY2hhbmdlQXR0cmlidXRlKCdtaW4nLCB2YWx1ZSk7XG4gIH1cblxuICBASW5wdXQoKVxuICBzZXQgbWF4KHZhbHVlOiBudW1iZXIpIHtcbiAgICB0aGlzLmNoYW5nZUF0dHJpYnV0ZSgnbWF4JywgdmFsdWUpO1xuICB9XG5cbiAgQElucHV0KClcbiAgc2V0IHN0ZXAodmFsdWU6IG51bWJlcikge1xuICAgIHRoaXMuY2hhbmdlQXR0cmlidXRlKCdzdGVwJywgdmFsdWUpO1xuICB9XG5cbiAgQElucHV0KClcbiAgc2V0IHByZWNpc2lvbih2YWx1ZTogbnVtYmVyKSB7XG4gICAgdGhpcy5jaGFuZ2VBdHRyaWJ1dGUoJ3ByZWNpc2lvbicsIHZhbHVlKTtcbiAgfVxuXG4gIEBJbnB1dCgpXG4gIHNldCBvcmllbnRhdGlvbih2YWx1ZTogc3RyaW5nKSB7XG4gICAgdGhpcy5jaGFuZ2VBdHRyaWJ1dGUoJ29yaWVudGF0aW9uJywgdmFsdWUpO1xuICB9XG5cbiAgQElucHV0KClcbiAgc2V0IHJhbmdlKHZhbHVlOiBib29sZWFuKSB7XG4gICAgdGhpcy5jaGFuZ2VBdHRyaWJ1dGUoJ3JhbmdlJywgdmFsdWUpO1xuICB9XG5cbiAgQElucHV0KClcbiAgc2V0IHNlbGVjdGlvbih2YWx1ZTogc3RyaW5nKSB7XG4gICAgdGhpcy5jaGFuZ2VBdHRyaWJ1dGUoJ3NlbGVjdGlvbicsIHZhbHVlKTtcbiAgfVxuXG4gIEBJbnB1dCgpXG4gIHNldCB0b29sdGlwKHZhbHVlOiBzdHJpbmcpIHtcbiAgICB0aGlzLmNoYW5nZUF0dHJpYnV0ZSgndG9vbHRpcCcsIHZhbHVlKTtcbiAgfVxuXG4gIEBJbnB1dCgpXG4gIHNldCB0b29sdGlwU3BsaXQodmFsdWU6IGJvb2xlYW4pIHtcbiAgICB0aGlzLmNoYW5nZUF0dHJpYnV0ZSgndG9vbHRpcF9zcGxpdCcsIHZhbHVlKTtcbiAgfVxuXG4gIEBJbnB1dCgpXG4gIHNldCB0b29sdGlwUG9zaXRpb24odmFsdWU6IGJvb2xlYW4pIHtcbiAgICB0aGlzLmNoYW5nZUF0dHJpYnV0ZSgndG9vbHRpcFBvc2l0aW9uJywgdmFsdWUpO1xuICB9XG5cbiAgQElucHV0KClcbiAgc2V0IGhhbmRsZSh2YWx1ZTogc3RyaW5nKSB7XG4gICAgdGhpcy5jaGFuZ2VBdHRyaWJ1dGUoJ2hhbmRsZScsIHZhbHVlKTtcbiAgfVxuXG4gIEBJbnB1dCgpXG4gIHNldCByZXZlcnNlZCh2YWx1ZTogYm9vbGVhbikge1xuICAgIHRoaXMuY2hhbmdlQXR0cmlidXRlKCdyZXZlcnNlZCcsIHZhbHVlKTtcbiAgfVxuXG4gIEBJbnB1dCgpXG4gIHNldCBydGwodmFsdWU6IGJvb2xlYW4pIHtcbiAgICB0aGlzLmNoYW5nZUF0dHJpYnV0ZSgncnRsJywgdmFsdWUpO1xuICB9XG5cbiAgQElucHV0KClcbiAgc2V0IGVuYWJsZWQodmFsdWU6IGJvb2xlYW4pIHtcbiAgICB0aGlzLmNoYW5nZUF0dHJpYnV0ZSgnZW5hYmxlZCcsIHZhbHVlKTtcbiAgfVxuXG4gIEBJbnB1dCgpXG4gIHNldCBuYXR1cmFsQXJyb3dLZXlzKHZhbHVlOiBib29sZWFuKSB7XG4gICAgdGhpcy5jaGFuZ2VBdHRyaWJ1dGUoJ25hdHVyYWxfYXJyb3dfa2V5cycsIHZhbHVlKTtcbiAgfVxuXG4gIEBJbnB1dCgpXG4gIHNldCB0aWNrcyh2YWx1ZTogYW55W10pIHtcbiAgICB0aGlzLmNoYW5nZUF0dHJpYnV0ZSgndGlja3MnLCB2YWx1ZSk7XG4gIH1cblxuICBASW5wdXQoKVxuICBzZXQgdGlja3NQb3NpdGlvbnModmFsdWU6IG51bWJlcltdKSB7XG4gICAgdGhpcy5jaGFuZ2VBdHRyaWJ1dGUoJ3RpY2tzX3Bvc2l0aW9ucycsIHZhbHVlKTtcbiAgfVxuXG4gIEBJbnB1dCgpXG4gIHNldCB0aWNrc0xhYmVscyh2YWx1ZTogc3RyaW5nW10pIHtcbiAgICB0aGlzLmNoYW5nZUF0dHJpYnV0ZSgndGlja3NfbGFiZWxzJywgdmFsdWUpO1xuICB9XG5cbiAgQElucHV0KClcbiAgc2V0IHRpY2tzU25hcEJvdW5kcyh2YWx1ZTogbnVtYmVyKSB7XG4gICAgdGhpcy5jaGFuZ2VBdHRyaWJ1dGUoJ3RpY2tzX3NuYXBfYm91bmRzJywgdmFsdWUpO1xuICB9XG5cbiAgQElucHV0KClcbiAgc2V0IHRpY2tzVG9vbHRpcCh2YWx1ZTogYm9vbGVhbikge1xuICAgIHRoaXMuY2hhbmdlQXR0cmlidXRlKCd0aWNrc190b29sdGlwJywgdmFsdWUpO1xuICB9XG5cbiAgQElucHV0KClcbiAgc2V0IHNjYWxlKHZhbHVlOiBzdHJpbmcpIHtcbiAgICB0aGlzLmNoYW5nZUF0dHJpYnV0ZSgnc2NhbGUnLCB2YWx1ZSk7XG4gIH1cblxuICBASW5wdXQoKVxuICBzZXQgbGFiZWxsZWRCeSh2YWx1ZTogc3RyaW5nW10pIHtcbiAgICB0aGlzLmNoYW5nZUF0dHJpYnV0ZSgnbGFiZWxsZWRieScsIHZhbHVlKTtcbiAgfVxuXG4gIEBJbnB1dCgpXG4gIHNldCByYW5nZUhpZ2hsaWdodHModmFsdWU6IGFueVtdKSB7XG4gICAgdGhpcy5jaGFuZ2VBdHRyaWJ1dGUoJ3JhbmdlSGlnaGxpZ2h0cycsIHZhbHVlKTtcbiAgfVxuXG4gIEBJbnB1dCgpXG4gIHNldCBmb3JtYXR0ZXIodmFsdWU6IEZ1bmN0aW9uKSB7XG4gICAgdGhpcy5jaGFuZ2VBdHRyaWJ1dGUoJ2Zvcm1hdHRlcicsIHZhbHVlKTtcbiAgfVxuXG4gIC8vIFRoZSBmb2xsb3dpbmcgZXZlbnRzIGFyZSBlbWl0dGVkXG4gIEBPdXRwdXQoKSBzbGlkZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuICBAT3V0cHV0KCkgc2xpZGVTdGFydCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuICBAT3V0cHV0KCkgc2xpZGVTdG9wID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gIEBPdXRwdXQoKSBjaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgY29uc3RydWN0b3IoKSB7IH1cblxuICBwcml2YXRlIGFkZENoYW5nZUxpc3RlbmVycygpIHtcbiAgICB0aGlzLnNsaWRlci5vbignc2xpZGUnLCAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgdGhpcy5zbGlkZS5lbWl0KHZhbHVlKTtcbiAgICB9KTtcblxuICAgIHRoaXMuc2xpZGVyLm9uKCdzbGlkZVN0YXJ0JywgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgIHRoaXMuc2xpZGVTdGFydC5lbWl0KHZhbHVlKTtcbiAgICB9KTtcblxuICAgIHRoaXMuc2xpZGVyLm9uKCdzbGlkZVN0b3AnLCAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgdGhpcy5zbGlkZVN0b3AuZW1pdCh2YWx1ZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnNsaWRlci5vbignY2hhbmdlJywgKGV2ZW50OiBhbnkpID0+IHtcbiAgICAgIHRoaXMuY2hhbmdlLmVtaXQoZXZlbnQpO1xuICAgICAgdGhpcy52YWx1ZUNoYW5nZS5lbWl0KGV2ZW50Lm5ld1ZhbHVlKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgcHJlcGFyZVNsaWRlcigpIHtcbiAgICAvLyBXZSBuZWVkIHRvIGFkZCB0aGUgY2hhbmdlIGxpc3RlbmVycyBhZ2FpbiBhZnRlciBlYWNoIHJlZnJlc2hcbiAgICB0aGlzLmFkZENoYW5nZUxpc3RlbmVycygpO1xuXG4gICAgLy8gQWRkIHRoZSBzdHlsaW5nIHRvIHRoZSBlbGVtZW50XG4gICAgdGhpcy5zbGlkZXIuZ2V0RWxlbWVudCgpLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCB0aGlzLmluaXRpYWxTdHlsZSk7XG4gIH1cblxuICBwcml2YXRlIGNoYW5nZUF0dHJpYnV0ZShuYW1lOiBzdHJpbmcsIHZhbHVlOiBhbnkpIHtcbiAgICBpZiAodGhpcy5zbGlkZXIpIHtcbiAgICAgIHRoaXMuc2xpZGVyLnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7XG4gICAgICB0aGlzLnNsaWRlci5yZWZyZXNoKCk7XG4gICAgICB0aGlzLnByZXBhcmVTbGlkZXIoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5pbml0aWFsT3B0aW9uc1tuYW1lXSA9IHZhbHVlO1xuICAgIH1cbiAgfVxuXG4gIG5nT25Jbml0KCkge1xuICAgIC8vIERvbid0IHNldCB0aGUgdmFsdWUgb3ZlciB0aGUgaW5pdGlhbCBvcHRpb25zLCBiZWNhdXNlIGl0IHdpbGwgYWx3YXlcbiAgICAvLyBiZSByZXNldC4gVGhpcyBvcHRpb24gc2VlbXMgdG8gYmUgYSBsaXR0bGUgYnVnZ3kuXG4gICAgbGV0IHZhbHVlID0gdW5kZWZpbmVkO1xuXG4gICAgaWYgKHRoaXMuaW5pdGlhbE9wdGlvbnMudmFsdWUpIHtcbiAgICAgIHZhbHVlID0gdGhpcy5pbml0aWFsT3B0aW9ucy52YWx1ZTtcbiAgICAgIGRlbGV0ZSB0aGlzLmluaXRpYWxPcHRpb25zWyd2YWx1ZSddO1xuICAgIH1cblxuICAgIHRoaXMuc2xpZGVyID0gbmV3IFNsaWRlcih0aGlzLnNsaWRlckVsZW1lbnQubmF0aXZlRWxlbWVudCwgdGhpcy5pbml0aWFsT3B0aW9ucyk7XG5cbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIHRoaXMuc2xpZGVyLnNldFZhbHVlKHZhbHVlKTtcbiAgICB9XG5cbiAgICB0aGlzLnByZXBhcmVTbGlkZXIoKTtcbiAgfVxuXG59XG4iXX0=